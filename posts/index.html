<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Wei's Blog</title><meta name=keywords content><meta name=description content="Posts - Wei's Blog"><meta name=author content="Wei Wang"><link rel=canonical href=https://blog.weiwang.dev/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.4f86e311f545e60ec4b83271836649f4a55523416b7f3878a8a973c1a3193593.css integrity="sha256-T4bjEfVF5g7EuDJxg2ZJ9KVVI0Frfzh4qKlzwaMZNZM=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.weiwang.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.weiwang.dev/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.weiwang.dev/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.weiwang.dev/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.weiwang.dev/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.weiwang.dev/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Posts"><meta property="og:description" content="Blog about random stuff"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.weiwang.dev/posts/"><meta property="og:site_name" content="Wei's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Blog about random stuff"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.weiwang.dev/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.weiwang.dev/ accesskey=h title="Home (Alt + H)"><img src=https://blog.weiwang.dev/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.weiwang.dev/posts/ title=posts><span class=active>posts</span></a></li><li><a href=https://blog.weiwang.dev/tags/ title=tags><span>tags</span></a></li><li><a href=https://portfolio.weiwang.dev/ title=portfolio><span>portfolio</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://blog.weiwang.dev/>Home</a></div><h1>Posts
<a href=index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><header class=entry-header><h2>Duplicati Nextcloud Backup Script</h2></header><div class=entry-content><p>When Duplicati backups and restores Nextcloud files, we want to enable maintenance mode.
However by default, Duplicati runs scripts on every operation including when it lists the restore folders, which we don’t want.
The following scripts prevents Duplicati from running the script when it’s only listing the restore folders.
NextcloudOn.sh Script to turn on Nextcloud Maintenance mode
#!/bin/bash if [ "%DUPLICATI__OPERATIONNAME%" != "List" ] then nextcloud.occ maintenance:mode --on fi exit 0 NextcloudOff....</p></div><footer class=entry-footer><span title='2023-02-13 12:15:03 -0500 -0500'>February 13, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;130 words&nbsp;·&nbsp;Wei Wang</footer><a class=entry-link aria-label="post link to Duplicati Nextcloud Backup Script" href=https://blog.weiwang.dev/posts/2023/duplicati-nextcloud-backup-script/></a></article><article class=post-entry><header class=entry-header><h2>Duplicati Setup on Ubuntu</h2></header><div class=entry-content><p>Package Repository Setup Adding Mono Repository Add the Mono repository to your system as Duplicati requires mono in order to work.
sudo apt install gnupg ca-certificates sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF echo "deb https://download.mono-project.com/repo/ubuntu stable-focal main" | sudo tee /etc/apt/sources.list.d/mono-official-stable.list sudo apt update sudo apt install mono-devel gtk-sharp2 Downloading Duplicati Get the url of the latest version of Duplicat from this link.
Run wget to download the file. Replace the link below with the link you got from above....</p></div><footer class=entry-footer><span title='2023-02-13 12:07:14 -0500 -0500'>February 13, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;481 words&nbsp;·&nbsp;Wei Wang</footer><a class=entry-link aria-label="post link to Duplicati Setup on Ubuntu" href=https://blog.weiwang.dev/posts/2023/duplicati-setup/></a></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>